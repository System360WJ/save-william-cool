<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Save William Cool</title>

<style>
body {
  margin: 0;
  background: #0b0b0b;
  color: white;
  font-family: monospace;
  overflow: hidden;
  text-align: center;
}

#hud {
  position: fixed;
  top: 10px;
  width: 100%;
  display: flex;
  justify-content: space-around;
  z-index: 10;
}

#game {
  position: relative;
  width: 100vw;
  height: 100vh;
}

#william {
  position: absolute;
  width: 40px;
  height: 100px;
  background:
    linear-gradient(#f5d7a1 20%, #000 20% 100%);
  border: 3px solid white;
  image-rendering: pixelated;
  transition: transform 0.1s linear;
}

/* Blonde hair */
#william::before {
  content: "";
  position: absolute;
  top: -12px;
  width: 100%;
  height: 15px;
  background: #ffdd55;
}

/* Enemy */
.enemy {
  position: absolute;
  width: 30px;
  height: 30px;
  background: red;
  animation: float 1s infinite alternate;
}

@keyframes float {
  from { transform: translateY(0); }
  to { transform: translateY(10px); }
}

/* Explosion */
.explode {
  animation: boom 0.6s forwards;
}

@keyframes boom {
  0% { transform: scale(1); background: red; }
  50% { transform: scale(2); background: orange; }
  100% { transform: scale(0); opacity: 0; }
}

/* Survival animation */
.survive {
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 5px #0f0; }
  to { box-shadow: 0 0 20px #0f0; }
}

#questionBox {
  position: fixed;
  bottom: 20px;
  width: 100%;
}

button {
  background: black;
  color: white;
  border: 2px solid white;
  margin: 5px;
  padding: 8px;
  cursor: pointer;
}
button:hover {
  background: white;
  color: black;
}
</style>
</head>

<body>

<div id="hud">
  <div id="status">Answer carefullyâ€¦</div>
</div>

<div id="game">
  <div id="william"></div>
</div>

<div id="questionBox">
  <p id="question"></p>
  <div id="answers"></div>
</div>

<script>
/* ---------- SOUND EFFECTS ---------- */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playBeep(freq, duration=0.15) {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.frequency.value = freq;
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start();
  osc.stop(audioCtx.currentTime + duration);
}

/* ---------- QUESTIONS ---------- */
const questions = [
{
q: "Which one is wrong?",
a: [
"The poem is spoken by an unborn child.",
"The speaker asks for protection from cruelty.",
"The speaker confidently embraces being born."
],
correct: 2
},
{
q: "Which one is wrong?",
a: [
"The poem is written in free verse.",
"The poem is structured as pleas beginning with 'I'.",
"Each stanza has the same number of lines."
],
correct: 2
},
{
q: "Which one is wrong?",
a: [
"The poem was written during World War Two.",
"The person wants peaceful societies.",
"The poem warns about humanity."
],
correct: 0
},
{
q: "Which one is wrong?",
a: [
"The poem warns about humanity.",
"The poem encourages conformity.",
"The speaker begs not to be murdered."
],
correct: 1
}
];

let current = 0;
let correctCount = 0;
let wrongCount = 0;

/* ---------- ELEMENTS ---------- */
const william = document.getElementById("william");
const questionEl = document.getElementById("question");
const answersEl = document.getElementById("answers");
const statusEl = document.getElementById("status");

/* ---------- MOUSE FOLLOW ---------- */
document.addEventListener("mousemove", e => {
  william.style.left = e.clientX - 20 + "px";
  william.style.top = e.clientY - 50 + "px";
});

/* ---------- ENEMY SPAWN ---------- */
function spawnEnemy() {
  const enemy = document.createElement("div");
  enemy.className = "enemy";
  enemy.style.left = Math.random()*window.innerWidth + "px";
  enemy.style.top = Math.random()*window.innerHeight + "px";
  document.getElementById("game").appendChild(enemy);
  setTimeout(() => enemy.remove(), 1200);
}

/* ---------- GAME LOGIC ---------- */
function loadQuestion() {
  if (current >= questions.length) {
    endGame();
    return;
  }

  questionEl.textContent = questions[current].q;
  answersEl.innerHTML = "";

  questions[current].a.forEach((text, i) => {
    const btn = document.createElement("button");
    btn.textContent = text;
    btn.onclick = () => answer(i);
    answersEl.appendChild(btn);
  });
}

function answer(choice) {
  if (choice === questions[current].correct) {
    correctCount++;
    playBeep(600);
  } else {
    wrongCount++;
    playBeep(200);
    spawnEnemy();
  }
  current++;
  loadQuestion();
}

/* ---------- ENDINGS ---------- */
function endGame() {
  answersEl.innerHTML = "";
  questionEl.textContent = "";

  if (correctCount === questions.length) {
    statusEl.textContent = "ðŸŽ‰ William Cool is SAVED";
    william.classList.add("survive");
    playBeep(800, 0.3);
  }
  else if (wrongCount === questions.length) {
    statusEl.textContent = "ðŸ˜± WHAT HAVE YOU DONE?!";
    william.classList.add("explode");
    playBeep(100, 0.5);
  }
  else {
    statusEl.textContent = "ðŸ’¥ William Cool has fallenâ€¦";
    william.classList.add("explode");
    playBeep(150, 0.4);
  }
}

loadQuestion();
</script>

</body>
</html>
